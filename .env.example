# ══════════════════════════════════════════════════════════════════════
# Bank→YNAB v4.0 — Environment Variables
# ══════════════════════════════════════════════════════════════════════
#
# Copy this file to .env and fill in your actual values:
#   cp .env.example .env
#
# NEVER commit .env to version control!
# ══════════════════════════════════════════════════════════════════════

# ── Google AI (Required) ─────────────────────────────────────────────
# Get your API key from: https://aistudio.google.com/apikey
GOOGLE_API_KEY=your-google-api-key-here

# GCP project ID (used for OpenTelemetry, Pub/Sub, and ADK runtime)
GOOGLE_CLOUD_PROJECT=your-gcp-project-id

# Model to use for all agents (default: gemini-3-flash-preview)
# MODEL_NAME=gemini-3-flash-preview

# ── YNAB (Required) ──────────────────────────────────────────────────
# Get your personal access token from: https://app.ynab.com/settings/developer
YNAB_ACCESS_TOKEN=your-ynab-access-token-here

# Optional: pre-set budget and account IDs (auto-detected by agents if empty)
# YNAB_BUDGET_ID=
# YNAB_ACCOUNT_ID=

# ── Ingestion Mode (Required for v4.2+) ──────────────────────────────
# Controls how the app receives emails:
#   api     — Only HTTP endpoints, no Gmail integration (default)
#   push    — Gmail push notifications via Pub/Sub (RECOMMENDED for production)
#   polling — HTTP endpoints + background Gmail polling (dev/local only)
#   hybrid  — Push + polling fallback with automatic deduplication
INGESTION_MODE=api

# ── GCP Pub/Sub (Required for push/hybrid modes) ────────────────────
# Format: projects/{GCP_PROJECT_ID}/topics/{TOPIC_NAME}
# Create the topic in GCP Console and grant publish access to:
#   gmail-api-push@system.gserviceaccount.com
# GCP_PUBSUB_TOPIC=projects/my-project/topics/gmail-notifications

# Label IDs to filter push notifications (comma-separated)
# GMAIL_PUSH_LABEL_IDS=["INBOX"]

# ── Gmail Settings (Optional) ───────────────────────────────────────

# Polling interval in seconds (only used with polling/hybrid modes)
# POLL_INTERVAL_SECONDS=60

# Auto-create transactions in YNAB when processing via Gmail (push or polling)
# GMAIL_AUTO_CREATE=true

# Mark emails as read after successful processing
# GMAIL_MARK_AS_READ=false

# ── Guardrails (Optional) ────────────────────────────────────────────
# Maximum transaction amount (COP) before flagging for review
# MAX_TRANSACTION_AMOUNT=50000000

# Window in minutes to check for duplicate transactions
# DUPLICATE_WINDOW_MINUTES=5

# ── OpenTelemetry (Optional — Cloud Run auto-configures this) ────────
# OTLP exporter endpoint for traces
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# ── Runtime (Optional) ───────────────────────────────────────────────
# PORT=8080

# ── Airtable (Optional) ──────────────────────────────────────────────
# Get your personal access token from: https://airtable.com/create/tokens
# AIRTABLE_PERSONAL_ACCESS_TOKEN=your-airtable-token-here

API_KEY_SECRET=
